<!DOCTYPE html>

<html>
<head>
  <title>BladeCompiler.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="BladeCompiler.html">
                  BladeCompiler.php
                </a>
              
                
                <a class="source" href="Compiler.html">
                  Compiler.php
                </a>
              
                
                <a class="source" href="CompilerInterface.html">
                  CompilerInterface.php
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>BladeCompiler.php</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-preprocessor">&lt;?php</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">View</span>\<span class="hljs-title">Compilers</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Closure</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BladeCompiler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Compiler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CompilerInterface</span> </span>{

	<span class="hljs-comment">/**
	 * All of the registered extensions.
	 *
	 *<span class="hljs-phpdoc"> @var</span> array
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-variable">$extensions</span> = <span class="hljs-keyword">array</span>();

	<span class="hljs-comment">/**
	 * The file currently being compiled.
	 *
	 *<span class="hljs-phpdoc"> @var</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-variable">$path</span>;

	<span class="hljs-comment">/**
	 * All of the available compiler functions.
	 *
	 *<span class="hljs-phpdoc"> @var</span> array
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-variable">$compilers</span> = <span class="hljs-keyword">array</span>(
		<span class="hljs-string">'Extensions'</span>,
		<span class="hljs-string">'Statements'</span>,
		<span class="hljs-string">'Comments'</span>,
		<span class="hljs-string">'Echos'</span>
	);

	<span class="hljs-comment">/**
	 * Array of opening and closing tags for escaped echos.
	 *
	 *<span class="hljs-phpdoc"> @var</span> array
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-variable">$contentTags</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">'{{'</span>, <span class="hljs-string">'}}'</span>);

	<span class="hljs-comment">/**
	 * Array of opening and closing tags for escaped echos.
	 *
	 *<span class="hljs-phpdoc"> @var</span> array
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-variable">$escapedTags</span> = <span class="hljs-keyword">array</span>(<span class="hljs-string">'{{{'</span>, <span class="hljs-string">'}}}'</span>);

	<span class="hljs-comment">/**
	 * Array of footer lines to be added to template.
	 *
	 *<span class="hljs-phpdoc"> @var</span> array
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-variable">$footer</span> = <span class="hljs-keyword">array</span>();

	<span class="hljs-comment">/**
	 * Counter to keep track of nested forelse statements.
	 *
	 *<span class="hljs-phpdoc"> @var</span> int
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-variable">$forelseCounter</span> = <span class="hljs-number">0</span>;

	<span class="hljs-comment">/**
	 * Compile the view at the given path.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $path
	 *<span class="hljs-phpdoc"> @return</span> void
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compile</span><span class="hljs-params">(<span class="hljs-variable">$path</span> = null)</span>
	</span>{
		<span class="hljs-variable">$this</span>-&gt;footer = <span class="hljs-keyword">array</span>();

		<span class="hljs-keyword">if</span> (<span class="hljs-variable">$path</span>)
		{
			<span class="hljs-variable">$this</span>-&gt;setPath(<span class="hljs-variable">$path</span>);
		}

		<span class="hljs-variable">$contents</span> = <span class="hljs-variable">$this</span>-&gt;compileString(<span class="hljs-variable">$this</span>-&gt;files-&gt;get(<span class="hljs-variable">$path</span>));

		<span class="hljs-keyword">if</span> ( ! is_null(<span class="hljs-variable">$this</span>-&gt;cachePath))
		{
			<span class="hljs-variable">$this</span>-&gt;files-&gt;put(<span class="hljs-variable">$this</span>-&gt;getCompiledPath(<span class="hljs-variable">$this</span>-&gt;getPath()), <span class="hljs-variable">$contents</span>);
		}
	}

	<span class="hljs-comment">/**
	 * Get the path currently being compiled.
	 *
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getPath</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>-&gt;path;
	}

	<span class="hljs-comment">/**
	 * Set the path currently being compiled.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $path
	 *<span class="hljs-phpdoc"> @return</span> void
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setPath</span><span class="hljs-params">(<span class="hljs-variable">$path</span>)</span>
	</span>{
		<span class="hljs-variable">$this</span>-&gt;path = <span class="hljs-variable">$path</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the given Blade template contents.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $value
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileString</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
	</span>{
		<span class="hljs-variable">$result</span> = <span class="hljs-string">''</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Here we will loop through all of the tokens returned by the Zend lexer and
parse each one into the corresponding valid PHP. We will then have this
template as the correctly rendered PHP that can be rendered natively.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">foreach</span> (token_get_all(<span class="hljs-variable">$value</span>) <span class="hljs-keyword">as</span> <span class="hljs-variable">$token</span>)
		{
			<span class="hljs-variable">$result</span> .= is_array(<span class="hljs-variable">$token</span>) ? <span class="hljs-variable">$this</span>-&gt;parseToken(<span class="hljs-variable">$token</span>) : <span class="hljs-variable">$token</span>;
		}</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>If there are any footer lines that need to get added to a template we will
add them here at the end of the template. This gets used mainly for the
template inheritance via the extends keyword that should be appended.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>		<span class="hljs-keyword">if</span> (count(<span class="hljs-variable">$this</span>-&gt;footer) &gt; <span class="hljs-number">0</span>)
		{
			<span class="hljs-variable">$result</span> = ltrim(<span class="hljs-variable">$result</span>, PHP_EOL)
					.PHP_EOL.implode(PHP_EOL, array_reverse(<span class="hljs-variable">$this</span>-&gt;footer));
		}

		<span class="hljs-keyword">return</span> <span class="hljs-variable">$result</span>;
	}

	<span class="hljs-comment">/**
	 * Parse the tokens from the template.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  array  $token
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseToken</span><span class="hljs-params">(<span class="hljs-variable">$token</span>)</span>
	</span>{
		<span class="hljs-keyword">list</span>(<span class="hljs-variable">$id</span>, <span class="hljs-variable">$content</span>) = <span class="hljs-variable">$token</span>;

		<span class="hljs-keyword">if</span> (<span class="hljs-variable">$id</span> == T_INLINE_HTML)
		{
			<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$this</span>-&gt;compilers <span class="hljs-keyword">as</span> <span class="hljs-variable">$type</span>)
			{
				<span class="hljs-variable">$content</span> = <span class="hljs-variable">$this</span>-&gt;{<span class="hljs-string">"compile{$type}"</span>}(<span class="hljs-variable">$content</span>);
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-variable">$content</span>;
	}

	<span class="hljs-comment">/**
	 * Execute the user defined extensions.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $value
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileExtensions</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
	</span>{
		<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$this</span>-&gt;extensions <span class="hljs-keyword">as</span> <span class="hljs-variable">$compiler</span>)
		{
			<span class="hljs-variable">$value</span> = call_user_func(<span class="hljs-variable">$compiler</span>, <span class="hljs-variable">$value</span>, <span class="hljs-variable">$this</span>);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-variable">$value</span>;
	}

	<span class="hljs-comment">/**
	 * Compile Blade comments into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $value
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileComments</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
	</span>{
		<span class="hljs-variable">$pattern</span> = sprintf(<span class="hljs-string">'/%s--((.|\s)*?)--%s/'</span>, <span class="hljs-variable">$this</span>-&gt;contentTags[<span class="hljs-number">0</span>], <span class="hljs-variable">$this</span>-&gt;contentTags[<span class="hljs-number">1</span>]);

		<span class="hljs-keyword">return</span> preg_replace(<span class="hljs-variable">$pattern</span>, <span class="hljs-string">'&lt;?php /*$1*/ ?&gt;'</span>, <span class="hljs-variable">$value</span>);
	}

	<span class="hljs-comment">/**
	 * Compile Blade echos into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $value
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEchos</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
	</span>{
		<span class="hljs-variable">$difference</span> = strlen(<span class="hljs-variable">$this</span>-&gt;contentTags[<span class="hljs-number">0</span>]) - strlen(<span class="hljs-variable">$this</span>-&gt;escapedTags[<span class="hljs-number">0</span>]);

		<span class="hljs-keyword">if</span> (<span class="hljs-variable">$difference</span> &gt; <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>-&gt;compileEscapedEchos(<span class="hljs-variable">$this</span>-&gt;compileRegularEchos(<span class="hljs-variable">$value</span>));
		}

		<span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>-&gt;compileRegularEchos(<span class="hljs-variable">$this</span>-&gt;compileEscapedEchos(<span class="hljs-variable">$value</span>));
	}

	<span class="hljs-comment">/**
	 * Compile Blade Statements that start with "@"
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $value
	 *<span class="hljs-phpdoc"> @return</span> mixed
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileStatements</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
	</span>{
		<span class="hljs-variable">$callback</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-variable">$match</span>)</span>
		</span>{
			<span class="hljs-keyword">if</span> (method_exists(<span class="hljs-variable">$this</span>, <span class="hljs-variable">$method</span> = <span class="hljs-string">'compile'</span>.ucfirst(<span class="hljs-variable">$match</span>[<span class="hljs-number">1</span>])))
			{
				<span class="hljs-variable">$match</span>[<span class="hljs-number">0</span>] = <span class="hljs-variable">$this</span>-&gt;<span class="hljs-variable">$method</span>(array_get(<span class="hljs-variable">$match</span>, <span class="hljs-number">3</span>));
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">isset</span>(<span class="hljs-variable">$match</span>[<span class="hljs-number">3</span>]) ? <span class="hljs-variable">$match</span>[<span class="hljs-number">0</span>] : <span class="hljs-variable">$match</span>[<span class="hljs-number">0</span>].<span class="hljs-variable">$match</span>[<span class="hljs-number">2</span>];
		};

		<span class="hljs-keyword">return</span> preg_replace_callback(<span class="hljs-string">'/\B@(\w+)([ \t]*)(\( ( (?&gt;[^()]+) | (?3) )* \))?/x'</span>, <span class="hljs-variable">$callback</span>, <span class="hljs-variable">$value</span>);
	}

	<span class="hljs-comment">/**
	 * Compile the "regular" echo statements.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $value
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileRegularEchos</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
	</span>{
		<span class="hljs-variable">$pattern</span> = sprintf(<span class="hljs-string">'/(@)?%s\s*(.+?)\s*%s(\r?\n)?/s'</span>, <span class="hljs-variable">$this</span>-&gt;contentTags[<span class="hljs-number">0</span>], <span class="hljs-variable">$this</span>-&gt;contentTags[<span class="hljs-number">1</span>]);

		<span class="hljs-variable">$callback</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-variable">$matches</span>)</span>
		</span>{
			<span class="hljs-variable">$whitespace</span> = <span class="hljs-keyword">empty</span>(<span class="hljs-variable">$matches</span>[<span class="hljs-number">3</span>]) ? <span class="hljs-string">''</span> : <span class="hljs-variable">$matches</span>[<span class="hljs-number">3</span>].<span class="hljs-variable">$matches</span>[<span class="hljs-number">3</span>];

			<span class="hljs-keyword">return</span> <span class="hljs-variable">$matches</span>[<span class="hljs-number">1</span>] ? substr(<span class="hljs-variable">$matches</span>[<span class="hljs-number">0</span>], <span class="hljs-number">1</span>) : <span class="hljs-string">'&lt;?php echo '</span>.<span class="hljs-variable">$this</span>-&gt;compileEchoDefaults(<span class="hljs-variable">$matches</span>[<span class="hljs-number">2</span>]).<span class="hljs-string">'; ?&gt;'</span>.<span class="hljs-variable">$whitespace</span>;
		};

		<span class="hljs-keyword">return</span> preg_replace_callback(<span class="hljs-variable">$pattern</span>, <span class="hljs-variable">$callback</span>, <span class="hljs-variable">$value</span>);
	}

	<span class="hljs-comment">/**
	 * Compile the escaped echo statements.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $value
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEscapedEchos</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
	</span>{
		<span class="hljs-variable">$pattern</span> = sprintf(<span class="hljs-string">'/%s\s*(.+?)\s*%s(\r?\n)?/s'</span>, <span class="hljs-variable">$this</span>-&gt;escapedTags[<span class="hljs-number">0</span>], <span class="hljs-variable">$this</span>-&gt;escapedTags[<span class="hljs-number">1</span>]);

		<span class="hljs-variable">$callback</span> = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-variable">$matches</span>)</span>
		</span>{
			<span class="hljs-variable">$whitespace</span> = <span class="hljs-keyword">empty</span>(<span class="hljs-variable">$matches</span>[<span class="hljs-number">2</span>]) ? <span class="hljs-string">''</span> : <span class="hljs-variable">$matches</span>[<span class="hljs-number">2</span>].<span class="hljs-variable">$matches</span>[<span class="hljs-number">2</span>];

			<span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;?php echo e('</span>.<span class="hljs-variable">$this</span>-&gt;compileEchoDefaults(<span class="hljs-variable">$matches</span>[<span class="hljs-number">1</span>]).<span class="hljs-string">'); ?&gt;'</span>.<span class="hljs-variable">$whitespace</span>;
		};

		<span class="hljs-keyword">return</span> preg_replace_callback(<span class="hljs-variable">$pattern</span>, <span class="hljs-variable">$callback</span>, <span class="hljs-variable">$value</span>);
	}

	<span class="hljs-comment">/**
	 * Compile the default values for the echo statement.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $value
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEchoDefaults</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> preg_replace(<span class="hljs-string">'/^(?=\$)(.+?)(?:\s+or\s+)(.+?)$/s'</span>, <span class="hljs-string">'isset($1) ? $1 : $2'</span>, <span class="hljs-variable">$value</span>);
	}

	<span class="hljs-comment">/**
	 * Compile the each statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEach</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php echo \$__env-&gt;renderEach{$expression}; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the yield statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileYield</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php echo \$__env-&gt;yieldContent{$expression}; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the show statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileShow</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php echo \$__env-&gt;yieldSection(); ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the section statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileSection</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php \$__env-&gt;startSection{$expression}; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the append statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileAppend</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php \$__env-&gt;appendSection(); ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the end-section statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEndsection</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php \$__env-&gt;stopSection(); ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the stop statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileStop</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php \$__env-&gt;stopSection(); ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the overwrite statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileOverwrite</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php \$__env-&gt;stopSection(true); ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the unless statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileUnless</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php if ( ! $expression): ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the end unless statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEndunless</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php endif; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the lang statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileLang</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php echo \\Illuminate\\Support\\Facades\\Lang::get$expression; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the choice statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileChoice</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php echo \\Illuminate\\Support\\Facades\\Lang::choice$expression; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the else statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileElse</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php else: ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the for statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileFor</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php for{$expression}: ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the foreach statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileForeach</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php foreach{$expression}: ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the forelse statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileForelse</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-variable">$empty</span> = <span class="hljs-string">'$__empty_'</span> . ++<span class="hljs-variable">$this</span>-&gt;forelseCounter;

		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php {$empty} = true; foreach{$expression}: {$empty} = false; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the if statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileIf</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php if{$expression}: ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the else-if statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileElseif</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php elseif{$expression}: ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the forelse statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEmpty</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-variable">$empty</span> = <span class="hljs-string">'$__empty_'</span> . <span class="hljs-variable">$this</span>-&gt;forelseCounter--;

		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php endforeach; if ({$empty}): ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the while statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileWhile</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php while{$expression}: ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the end-while statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEndwhile</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php endwhile; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the end-for statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEndfor</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php endfor; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the end-for-each statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEndforeach</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php endforeach; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the end-if statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEndif</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php endif; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the end-for-else statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEndforelse</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php endif; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the extends statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileExtends</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> (starts_with(<span class="hljs-variable">$expression</span>, <span class="hljs-string">'('</span>))
		{
			<span class="hljs-variable">$expression</span> = substr(<span class="hljs-variable">$expression</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>);
		}

		<span class="hljs-variable">$data</span> = <span class="hljs-string">"&lt;?php echo \$__env-&gt;make($expression, array_except(get_defined_vars(), array('__data', '__path')))-&gt;render(); ?&gt;"</span>;

		<span class="hljs-variable">$this</span>-&gt;footer[] = <span class="hljs-variable">$data</span>;

		<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the include statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileInclude</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> (starts_with(<span class="hljs-variable">$expression</span>, <span class="hljs-string">'('</span>))
		{
			<span class="hljs-variable">$expression</span> = substr(<span class="hljs-variable">$expression</span>, <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php echo \$__env-&gt;make($expression, array_except(get_defined_vars(), array('__data', '__path')))-&gt;render(); ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the stack statements into the content
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileStack</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php echo \$__env-&gt;yieldContent{$expression}; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the push statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compilePush</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php \$__env-&gt;startSection{$expression}; ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Compile the endpush statements into valid PHP.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $expression
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compileEndpush</span><span class="hljs-params">(<span class="hljs-variable">$expression</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;?php \$__env-&gt;appendSection(); ?&gt;"</span>;
	}

	<span class="hljs-comment">/**
	 * Register a custom Blade compiler.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  \Closure  $compiler
	 *<span class="hljs-phpdoc"> @return</span> void
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extend</span><span class="hljs-params">(Closure <span class="hljs-variable">$compiler</span>)</span>
	</span>{
		<span class="hljs-variable">$this</span>-&gt;extensions[] = <span class="hljs-variable">$compiler</span>;
	}

	<span class="hljs-comment">/**
	 * Get the regular expression for a generic Blade function.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $function
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createMatcher</span><span class="hljs-params">(<span class="hljs-variable">$function</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">'/(?&lt;!\w)(\s*)@'</span>.<span class="hljs-variable">$function</span>.<span class="hljs-string">'(\s*\(.*\))/'</span>;
	}

	<span class="hljs-comment">/**
	 * Get the regular expression for a generic Blade function.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $function
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createOpenMatcher</span><span class="hljs-params">(<span class="hljs-variable">$function</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">'/(?&lt;!\w)(\s*)@'</span>.<span class="hljs-variable">$function</span>.<span class="hljs-string">'(\s*\(.*)\)/'</span>;
	}

	<span class="hljs-comment">/**
	 * Create a plain Blade matcher.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $function
	 *<span class="hljs-phpdoc"> @return</span> string
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createPlainMatcher</span><span class="hljs-params">(<span class="hljs-variable">$function</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">'/(?&lt;!\w)(\s*)@'</span>.<span class="hljs-variable">$function</span>.<span class="hljs-string">'(\s*)/'</span>;
	}

	<span class="hljs-comment">/**
	 * Sets the content tags used for the compiler.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $openTag
	 *<span class="hljs-phpdoc"> @param</span>  string  $closeTag
	 *<span class="hljs-phpdoc"> @param</span>  bool    $escaped
	 *<span class="hljs-phpdoc"> @return</span> void
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setContentTags</span><span class="hljs-params">(<span class="hljs-variable">$openTag</span>, <span class="hljs-variable">$closeTag</span>, <span class="hljs-variable">$escaped</span> = false)</span>
	</span>{
		<span class="hljs-variable">$property</span> = (<span class="hljs-variable">$escaped</span> === <span class="hljs-keyword">true</span>) ? <span class="hljs-string">'escapedTags'</span> : <span class="hljs-string">'contentTags'</span>;

		<span class="hljs-variable">$this</span>-&gt;{<span class="hljs-variable">$property</span>} = <span class="hljs-keyword">array</span>(preg_quote(<span class="hljs-variable">$openTag</span>), preg_quote(<span class="hljs-variable">$closeTag</span>));
	}

	<span class="hljs-comment">/**
	 * Sets the escaped content tags used for the compiler.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  string  $openTag
	 *<span class="hljs-phpdoc"> @param</span>  string  $closeTag
	 *<span class="hljs-phpdoc"> @return</span> void
	 */</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setEscapedContentTags</span><span class="hljs-params">(<span class="hljs-variable">$openTag</span>, <span class="hljs-variable">$closeTag</span>)</span>
	</span>{
		<span class="hljs-variable">$this</span>-&gt;setContentTags(<span class="hljs-variable">$openTag</span>, <span class="hljs-variable">$closeTag</span>, <span class="hljs-keyword">true</span>);
	}

	<span class="hljs-comment">/**
	* Gets the content tags used for the compiler.
	*
	*<span class="hljs-phpdoc"> @return</span> string
	*/</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getContentTags</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>-&gt;getTags();
	}

	<span class="hljs-comment">/**
	* Gets the escaped content tags used for the compiler.
	*
	*<span class="hljs-phpdoc"> @return</span> string
	*/</span>
	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEscapedContentTags</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>-&gt;getTags(<span class="hljs-keyword">true</span>);
	}

	<span class="hljs-comment">/**
	 * Gets the tags used for the compiler.
	 *
	 *<span class="hljs-phpdoc"> @param</span>  bool  $escaped
	 *<span class="hljs-phpdoc"> @return</span> array
	 */</span>
	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getTags</span><span class="hljs-params">(<span class="hljs-variable">$escaped</span> = false)</span>
	</span>{
		<span class="hljs-variable">$tags</span> = <span class="hljs-variable">$escaped</span> ? <span class="hljs-variable">$this</span>-&gt;escapedTags : <span class="hljs-variable">$this</span>-&gt;contentTags;

		<span class="hljs-keyword">return</span> array_map(<span class="hljs-string">'stripcslashes'</span>, <span class="hljs-variable">$tags</span>);
	}

}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
